import AnimatedNode from 'react-native-reanimated/src/core/AnimatedNode';
import AnimatedClock from 'react-native-reanimated/src/core/AnimatedClock';
import { AnimatedParam } from "react-native-reanimated/src/core/AnimatedParam";
import invariant from 'react-native-reanimated/src/core/node_modules/fbjs/lib/invariant';

class AnimatedStopClock extends AnimatedNode {
  _clockNode;

  constructor(clockNode) {
    invariant(
      clockNode instanceof AnimatedClock || clockNode instanceof AnimatedParam,
      `Reanimated: Animated.stopClock argument should be of type AnimatedClock but got ${clockNode}`
    );
    super({ type: 'clockStop', clock: clockNode });
    this._clockNode = clockNode;
  }

  toString() {
    return `AnimatedStopClock, id: ${this.__nodeID}`;
  }

  __onEvaluate() {
    this._clockNode.stop();
    return 0;
  }
}

export function createAnimatedStopClock(clock) {
  return new AnimatedStopClock(clock);
}
